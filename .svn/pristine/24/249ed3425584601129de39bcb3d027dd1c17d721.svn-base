/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package com.super_bits.modulosSB.SBCore.Mensagens;

import com.super_bits.modulosSB.SBCore.ManipulaArquivo.UtilSBCoreArquivoTexto;
import com.super_bits.modulosSB.SBCore.UtilGeral.UtilSBCoreDataHora;
import java.util.Date;

/**
 *
 * Classe para gerar mensagens em Arquivo Texto
 *
 * os Arquivos são sblogSystem.txt e sbLogUser.txt na raiz do sistema
 *
 * @author Sálvio Furbino <salviof@gmail.com>
 * @since 25/05/2014
 *
 */
public class CentralMensagemArqTexto implements ItfCentralMensagens {

    public static int maximoErroLog = 5000;
    public static final String ARQLOGSYSTEM = "/home/sbLogSystem.txt";
    public static final String ARQLOGUSUARIO = "/home/sbLogUser.txt";
    private TP_MENSAGEM tipoMensagem;

    private String makeCabecalho(TP_DESTINATARIO destinatario) {
        String linha = " -[";
        if (destinatario == TP_DESTINATARIO.SISTEMA) {
            linha = linha + UtilSBCoreDataHora.datahoraSistemaFr.format(new Date());
        }
        if (destinatario == TP_DESTINATARIO.USUARIO) {
            linha = linha + UtilSBCoreDataHora.getAgoraString(UtilSBCoreDataHora.FORMATO_TEMPO.DATA_HORA_USUARIO);

        }

        return linha + "] " + tipoMensagem;
    }

    public void enviaMensagemUsuario(String pMensagem, TP_MENSAGEM pTipoMsg) {
        tipoMensagem = pTipoMsg;
        UtilSBCoreArquivoTexto.escreverEmArquivo(ARQLOGUSUARIO + "_" + tipoMensagem, pMensagem);
    }

    public void enviaMensagemSistema(String pMensagem, TP_MENSAGEM pTipoMsg) {
        tipoMensagem = pTipoMsg;
        UtilSBCoreArquivoTexto.escreverEmArquivo(ARQLOGSYSTEM + "_" + tipoMensagem, pMensagem);
    }

}
