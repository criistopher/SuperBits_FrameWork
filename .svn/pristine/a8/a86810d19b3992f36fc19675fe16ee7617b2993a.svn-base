package com.super_bits.modulosSB.webPaginas.util;

import com.super_bits.modulosSB.Persistencia.dao.SBNQ;
import com.super_bits.modulosSB.SBCore.ConfigGeral.SBCore;
import com.super_bits.modulosSB.SBCore.Mensagens.ItfCentralMensagens;
import com.super_bits.modulosSB.SBCore.TratamentoDeErros.ErroSB;
import com.super_bits.modulosSB.webPaginas.ConfigGeral.SBWebPaginas;
import com.super_bits.modulosSB.webPaginas.JSFBeans.declarados.Paginas.ErroCritico.InfoErroCritico;
import com.super_bits.modulosSB.webPaginas.JSFBeans.declarados.Paginas.ErroCritico.InfoErroCriticoSQL;
import com.super_bits.modulosSB.webPaginas.JSFBeans.util.MensagensJSF;
import com.super_bits.modulosSB.webPaginas.TratamentoDeErros.ErroSBCritico;
import javax.faces.context.FacesContext;

public class CentralDeMensagensJSFAPP implements ItfCentralMensagens {

    private static InfoErroCritico infoErro;

    private void MensagemUsuario(String pMensgem) {
        MensagensJSF.InfoMessage(pMensgem);
    }

    private void alertaUsuario(String pMensgem) {
        MensagensJSF.InfoMessage(pMensgem);
    }

    private void erroUsuario(String pMensgem) {
        MensagensJSF.ErrorMessage(pMensgem);
    }

    private void mensagemSistema(String pMensagem) {
        System.out.println(pMensagem);
    }

    public void alertaSistema(String pMensagem) {
        System.out.println("");
        System.out.println("");
        System.out.println("");
        System.out.println("");
        System.out.println("ALERTA !!!!!!!!!!!!!!!");
        System.out.println(pMensagem);
        System.out.println("");
        System.out.println("");
        System.out.println("");
        System.out.println("");

    }

    public void erroSistema(String pMensagem) {
        try {
            throw new ErroSBCritico(pMensagem);
        } catch (ErroSBCritico e) {
            erroSistema(pMensagem, e);

        }
    }

    public void erroSistema(String pMensagem, Exception pExcept) {

        InfoErroCritico infoerro = new InfoErroCritico(pMensagem, pExcept);

        UtilSBWP_JSFTools.vaParaPagina(SBWebPaginas.getSiteURL() + "/erroCritico/" + infoerro.getTituloErro() + "/");
        //BeansUtil.putObjetoRequestScope("infoErroCritic",infoerro);
        //NavUtil.carregaPagina("/SBSystemPages/erroCriticoDeSistema.xhtml");
        UtilSBWPServletTools.putObjetoSessionScope("infoErroCritic", infoerro);
        System.out.println("teste executando comando depois de ir para a pagina");
        FacesContext.getCurrentInstance().getPartialViewContext().getRenderIds().add("infoPrin");
    }

    public void erroSQL(String pMensagem, SBNQ qinfo, Exception pExcept) {

        InfoErroCriticoSQL infoerro = new InfoErroCriticoSQL(pMensagem, qinfo, pExcept);
        UtilSBWPServletTools.putObjetoSessionScope("infoErroCritic", infoerro);
        UtilSBWP_JSFTools.vaParaPagina(SBWebPaginas.getSiteURL() + "/erroSQLInfo/" + infoerro.getTituloErro() + "/");
        //BeansUtil.putObjetoRequestScope("infoErroCritic",infoerro);
        //NavUtil.carregaPagina("/SBSystemPages/erroCriticoDeSistema.xhtml");

        System.out.println("teste executando comando depois de ir para a pagina");
        FacesContext.getCurrentInstance().getPartialViewContext().getRenderIds().add("infoPrin");
        FacesContext.getCurrentInstance().responseComplete();
        FacesContext.getCurrentInstance().renderResponse();
    }

    //infoErro.setCaminhoErro("teste jasdbadsasdghg");
    @Override
    public void enviaMensagemUsuario(String pMensagem, TP_MENSAGEM pTipoMsg) {
        try {
            MensagemUsuario(pMensagem);
        } catch (Throwable e) {
            System.out.println("erro enciando mensagem " + pMensagem);
        }
    }

    @Override
    public void enviaMensagemSistema(String pMensagem, TP_MENSAGEM pTipoMsg) {
        SBCore.RelatarErro(ErroSB.TIPO_ERRO.ALERTA_PROGRAMADOR, pMensagem);
    }

}
